"use strict";(self.webpackChunknewra=self.webpackChunknewra||[]).push([[164],{2093:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var n=s(4848),r=s(8453);const a={sidebar_position:1},i="Overview",o={id:"knowledgebases/datasources/flow",title:"Overview",description:"Our platform, NewRA, utilizes a modular approach for handling Dataspaces. Each distinct aspect of the Datasource operation has its dedicated module, including things like routes, models, controllers, and views.",source:"@site/docs/knowledgebases/datasources/flow.md",sourceDirName:"knowledgebases/datasources",slug:"/knowledgebases/datasources/flow",permalink:"/newra_documentation/docs/knowledgebases/datasources/flow",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/knowledgebases/datasources/flow.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/newra_documentation/docs/knowledgebases/datasources/database"},next:{title:"Text",permalink:"/newra_documentation/docs/knowledgebases/datasources/types/TextScrapping"}},c={},d=[{value:"Datasources",id:"datasources",level:2},{value:"Datasource Creation",id:"datasource-creation",level:2},{value:"Route Directory",id:"route-directory",level:2},{value:"Dispatched Events",id:"dispatched-events",level:2},{value:"Event Listeners",id:"event-listeners",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(t.p,{children:"Our platform, NewRA, utilizes a modular approach for handling Dataspaces. Each distinct aspect of the Datasource operation has its dedicated module, including things like routes, models, controllers, and views."}),"\n",(0,n.jsx)(t.p,{children:"In NewRA, you can select a knowledge base from different datasources through different methods. These methods include website scraping, uploading of PDF, TXT, or CSV documents or providing specific inputs."}),"\n",(0,n.jsx)(t.h2,{id:"datasources",children:"Datasources"}),"\n",(0,n.jsx)(t.p,{children:"Each datasource record will possess a status:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"'Pending': The datasource has been added, but content retrieval is yet to begin."}),"\n",(0,n.jsx)(t.li,{children:"'In Progress': Content retrieval from the datasource is ongoing."}),"\n",(0,n.jsx)(t.li,{children:"'Synced/Success': Successful content retrieval from the datasource."}),"\n",(0,n.jsx)(t.li,{children:"'Failed': Content retrieval from the datasource was unsuccessful."}),"\n",(0,n.jsx)(t.li,{children:"'Sync Requested': You have initiated a request to re-sync the content from the source."}),"\n",(0,n.jsx)(t.li,{children:"'Training Requested': You have requested to train the model using the datasource."}),"\n",(0,n.jsx)(t.li,{children:"'Trained': Training is complete, and the AI chatbot can now use this content to respond to user messages."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"datasource-creation",children:"Datasource Creation"}),"\n",(0,n.jsx)(t.p,{children:"Datasources can be created in multiple ways:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"'WebScrapping': Fetches text content from various sources such as web URLs, Sitemaps, and whole domains."}),"\n",(0,n.jsx)(t.li,{children:"'DocumentScrapping': Fetches text content from file extensions such as CSV, PDF, and text files."}),"\n",(0,n.jsx)(t.li,{children:"'TextScrapping': Trains the content from the manual text data provided in a textbox."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"The main goal is to create a datasource from one of these methods and generate vector data based on the derived data. For the vector data generation, we use Node.js. This vector data allows the chatbot to engage with users within context."}),"\n",(0,n.jsx)(t.h2,{id:"route-directory",children:"Route Directory"}),"\n",(0,n.jsxs)(t.p,{children:["For routes connected to the Datasource module reference the path ",(0,n.jsx)(t.code,{children:"newra/web/Modules/Datasource/Routes/web.php"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"dispatched-events",children:"Dispatched Events"}),"\n",(0,n.jsxs)(t.p,{children:["In response to particular conditions in the life cycle of a Datasource object, certain events are triggered. Namely, the events are ",(0,n.jsx)(t.code,{children:"DatasourceCreating"}),", and ",(0,n.jsx)(t.code,{children:"DataSourceDeleted"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-php",children:"class Datasource extends Model{\n    protected $dispatchesEvents = [\n        'creating' => DatasourceCreating::class,\n        'deleted' => DataSourceDeleted::class,\n    ];\n}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"event-listeners",children:"Event Listeners"}),"\n",(0,n.jsx)(t.p,{children:"Event listeners are designed to react to specific events that occur during the runtime of NewRA, particularly those related to the lifecycle of a Datasource. These listeners perform predefined tasks once the associated event has been dispatched. Here are the details of each listener:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"SyncNodeServer"}),": This listener becomes active when a ",(0,n.jsx)(t.code,{children:"DataSourceDeleted"})," event occurs. Located at ",(0,n.jsx)(t.code,{children:"Modules\\Datasource\\Listeners\\SyncNodeServer.php"}),", its handle function manages several tasks:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Logs that the Node server updating process has commenced."}),"\n",(0,n.jsx)(t.li,{children:"Prepares request data for vector deletion, including the event type, datasource details, and user particulars."}),"\n",(0,n.jsx)(t.li,{children:"Sends this array to the Node server to delete the related data."}),"\n",(0,n.jsx)(t.li,{children:"Checks for any associated S3 files with the datasource, and if found, deletes the files to prevent redundancy."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"CheckDatasourceLimit"}),": Triggered by the ",(0,n.jsx)(t.code,{children:"DatasourceCreating"})," event, this listener at ",(0,n.jsx)(t.code,{children:"Modules\\Datasource\\Listeners\\CheckDatasourceLimit.php"})," helps enforce user's datasource limit:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Whenever a new datasource is being created, it checks whether the new addition would breach the user's limit."}),"\n",(0,n.jsxs)(t.li,{children:["In the event that adding a new datasource would surpass the limit, it aborts the process and returns ",(0,n.jsx)(t.code,{children:"false"}),", indicating that datasource creation was unsuccessful."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"EventServiceProvider"}),": Located at ",(0,n.jsx)(t.code,{children:"Modules\\Datasource\\Providers\\EventServiceProvider.php"}),", this provider maps the events to their corresponding listeners when triggered within the application."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>o});var n=s(6540);const r={},a=n.createContext(r);function i(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);